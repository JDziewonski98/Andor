!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).rexlzstringplugin=n()}(this,function(){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function e(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,n){return(i=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function u(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}var n,t=(function(e){var v,t,o,r,i,n=(v=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={},i={compressToBase64:function(e){if(null==e)return"";var n=i._compress(e,6,function(e){return t.charAt(e)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(n){return null==n?"":""==n?null:i._decompress(n.length,32,function(e){return s(t,n.charAt(e))})},compressToUTF16:function(e){return null==e?"":i._compress(e,15,function(e){return v(e+32)})+" "},decompressFromUTF16:function(n){return null==n?"":""==n?null:i._decompress(n.length,16384,function(e){return n.charCodeAt(e)-32})},compressToUint8Array:function(e){for(var n=i.compress(e),t=new Uint8Array(2*n.length),o=0,r=n.length;o<r;o++){var s=n.charCodeAt(o);t[2*o]=s>>>8,t[2*o+1]=s%256}return t},decompressFromUint8Array:function(e){if(null==e)return i.decompress(e);for(var n=new Array(e.length/2),t=0,o=n.length;t<o;t++)n[t]=256*e[2*t]+e[2*t+1];var r=[];return n.forEach(function(e){r.push(v(e))}),i.decompress(r.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,function(e){return o.charAt(e)})},decompressFromEncodedURIComponent:function(n){return null==n?"":""==n?null:(n=n.replace(/ /g,"+"),i._decompress(n.length,32,function(e){return s(o,n.charAt(e))}))},compress:function(e){return i._compress(e,16,function(e){return v(e)})},_compress:function(e,n,t){if(null==e)return"";var o,r,s,i={},u={},c="",a="",p="",l=2,f=3,h=2,d=[],m=0,y=0;for(s=0;s<e.length;s+=1)if(c=e.charAt(s),Object.prototype.hasOwnProperty.call(i,c)||(i[c]=f++,u[c]=!0),a=p+c,Object.prototype.hasOwnProperty.call(i,a))p=a;else{if(Object.prototype.hasOwnProperty.call(u,p)){if(p.charCodeAt(0)<256){for(o=0;o<h;o++)m<<=1,y==n-1?(y=0,d.push(t(m)),m=0):y++;for(r=p.charCodeAt(0),o=0;o<8;o++)m=m<<1|1&r,y==n-1?(y=0,d.push(t(m)),m=0):y++,r>>=1}else{for(r=1,o=0;o<h;o++)m=m<<1|r,y==n-1?(y=0,d.push(t(m)),m=0):y++,r=0;for(r=p.charCodeAt(0),o=0;o<16;o++)m=m<<1|1&r,y==n-1?(y=0,d.push(t(m)),m=0):y++,r>>=1}0==--l&&(l=Math.pow(2,h),h++),delete u[p]}else for(r=i[p],o=0;o<h;o++)m=m<<1|1&r,y==n-1?(y=0,d.push(t(m)),m=0):y++,r>>=1;0==--l&&(l=Math.pow(2,h),h++),i[a]=f++,p=String(c)}if(""!==p){if(Object.prototype.hasOwnProperty.call(u,p)){if(p.charCodeAt(0)<256){for(o=0;o<h;o++)m<<=1,y==n-1?(y=0,d.push(t(m)),m=0):y++;for(r=p.charCodeAt(0),o=0;o<8;o++)m=m<<1|1&r,y==n-1?(y=0,d.push(t(m)),m=0):y++,r>>=1}else{for(r=1,o=0;o<h;o++)m=m<<1|r,y==n-1?(y=0,d.push(t(m)),m=0):y++,r=0;for(r=p.charCodeAt(0),o=0;o<16;o++)m=m<<1|1&r,y==n-1?(y=0,d.push(t(m)),m=0):y++,r>>=1}0==--l&&(l=Math.pow(2,h),h++),delete u[p]}else for(r=i[p],o=0;o<h;o++)m=m<<1|1&r,y==n-1?(y=0,d.push(t(m)),m=0):y++,r>>=1;0==--l&&(l=Math.pow(2,h),h++)}for(r=2,o=0;o<h;o++)m=m<<1|1&r,y==n-1?(y=0,d.push(t(m)),m=0):y++,r>>=1;for(;;){if(m<<=1,y==n-1){d.push(t(m));break}y++}return d.join("")},decompress:function(n){return null==n?"":""==n?null:i._decompress(n.length,32768,function(e){return n.charCodeAt(e)})},_decompress:function(e,n,t){var o,r,s,i,u,c,a,p=[],l=4,f=4,h=3,d="",m=[],y={val:t(0),position:n,index:1};for(o=0;o<3;o+=1)p[o]=o;for(s=0,u=Math.pow(2,2),c=1;c!=u;)i=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=t(y.index++)),s|=(0<i?1:0)*c,c<<=1;switch(s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)i=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=t(y.index++)),s|=(0<i?1:0)*c,c<<=1;a=v(s);break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)i=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=t(y.index++)),s|=(0<i?1:0)*c,c<<=1;a=v(s);break;case 2:return""}for(r=p[3]=a,m.push(a);;){if(y.index>e)return"";for(s=0,u=Math.pow(2,h),c=1;c!=u;)i=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=t(y.index++)),s|=(0<i?1:0)*c,c<<=1;switch(a=s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)i=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=t(y.index++)),s|=(0<i?1:0)*c,c<<=1;p[f++]=v(s),a=f-1,l--;break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)i=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=t(y.index++)),s|=(0<i?1:0)*c,c<<=1;p[f++]=v(s),a=f-1,l--;break;case 2:return m.join("")}if(0==l&&(l=Math.pow(2,h),h++),p[a])d=p[a];else{if(a!==f)return null;d=r+r.charAt(0)}m.push(d),p[f++]=r+d.charAt(0),r=d,0==--l&&(l=Math.pow(2,h),h++)}}});function s(e,n){if(!r[e]){r[e]={};for(var t=0;t<e.length;t++)r[e][e.charAt(t)]=t}return r[e][n]}null!=e&&(e.exports=n)}(n={exports:{}}),n.exports),c=Phaser.Utils.Objects.GetFastValue,a=function(){function n(e){o(this,n),this.resetFromJSON(e)}return e(n,[{key:"resetFromJSON",value:function(e){return this.setEncoding(c(e,"encoding",0)),this}},{key:"toJSON",value:function(){return{encoding:this.encoding}}},{key:"setEncoding",value:function(e){return void 0===e?e=0:"string"==typeof e&&(e=p[e.toLowerCase()]||0),this.encoding=e,this}},{key:"compress",value:function(e){var n=l[this.encoding];return t[n](e)}},{key:"decompress",value:function(e){var n=f[this.encoding];return t[n](e)}}]),n}(),p={none:0,base64:1,utf16:2,uri:3},l=["compress","compressToBase64","compressToUTF16","compressToEncodedURIComponent"],f=["decompress","decompressFromBase64","decompressFromUTF16","decompressFromEncodedURIComponent"];return function(){function t(e){var n;return o(this,t),(n=u(this,s(t).call(this,e))).lzstring=new a,n}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&i(e,n)}(t,Phaser.Plugins.BasePlugin),e(t,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"destroy",value:function(){this.lzstring=null,this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}},{key:"add",value:function(e){return new a(e)}}]),t}()});
