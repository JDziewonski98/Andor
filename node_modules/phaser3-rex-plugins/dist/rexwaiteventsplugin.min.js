!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).rexwaiteventsplugin=t()}(this,function(){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function e(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var s=Phaser.Structs.Set,c=function(){function n(e,t){o(this,n),this.setCompleteCallback(e,t),this.events=new s}return e(n,[{key:"shutdown",value:function(){return this.setCompleteCallback(void 0,void 0),this.events.clear(),this.event=void 0,this}},{key:"destroy",value:function(){return this.shutdown(),this}},{key:"setCompleteCallback",value:function(e,t){return this.completeCallback=e,this.scope=t,this}},{key:"waitCallback",value:function(){function e(){t.remove(e)}var t=this;return this.events.set(e),e}},{key:"waitEvent",value:function(e,t){return e.once(t,this.waitCallback()),this}},{key:"remove",value:function(e){return this.events.delete(e),0===this.events.size&&(this.scope?this.completeCallback.call(this.scope):this.completeCallback()),this}}]),n}();return function(){function t(e){return o(this,t),u(this,n(t).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(t,Phaser.Plugins.BasePlugin),e(t,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function(e,t){return new c(e,t)}}]),t}()});
